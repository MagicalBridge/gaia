# Gaia 节点启动脚本使用说明

本目录包含两个便捷的启动脚本，帮助你更轻松地管理 Gaia 节点。

## 📁 脚本文件

### 1. `start-gaia.sh` - 智能启动脚本

**功能特性：**
- ✅ 自动检查 `gaiad` 是否已安装
- ✅ 检测并停止占用端口的进程（26656, 26657）
- ✅ 重置节点数据和区块高度
- ✅ 检查配置文件，必要时提示初始化
- ✅ 彩色日志输出，清晰易读
- ✅ 错误处理和信号捕获

**使用方法：**
```bash
./start-gaia.sh
```

### 2. `restart-gaia.sh` - 快速重启脚本

**功能特性：**
- ⚡ 快速停止现有进程
- ⚡ 重置数据
- ⚡ 立即重启节点
- ⚡ 适合开发时频繁重启

**使用方法：**
```bash
./restart-gaia.sh
```

## 🚀 使用场景

### 首次启动或完整启动
使用 `start-gaia.sh`，它会进行完整的检查和准备：
```bash
./start-gaia.sh
```

### 开发时快速重启
使用 `restart-gaia.sh`，快速重置并重启：
```bash
./restart-gaia.sh
```

### 手动操作
如果你想手动控制每个步骤：
```bash
# 1. 停止现有进程
pkill gaiad

# 2. 重置数据
gaiad comet unsafe-reset-all

# 3. 启动节点
gaiad start
```

## 🔧 端口信息

节点启动后将使用以下端口：
- **P2P 端口**: 26656
- **RPC 端口**: 26657
- **gRPC 端口**: 9090
- **API 端口**: 1317

## 📋 常用命令

### 检查节点状态
```bash
gaiad status
```

### 查看节点版本
```bash
gaiad version
```

### 检查端口占用
```bash
lsof -i :26656 -i :26657
```

### 停止节点
```bash
# 方法1：在运行终端按 Ctrl+C
# 方法2：在其他终端运行
pkill gaiad
```

## 🛠️ 故障排除

### 端口被占用
脚本会自动处理端口冲突，但如果遇到问题，可以手动检查：
```bash
lsof -i :26656 -i :26657
kill <PID>
```

### 高度回退错误
脚本会自动重置数据，但如果仍有问题：
```bash
gaiad comet unsafe-reset-all
```

### 配置文件缺失
如果是全新环境，运行：
```bash
./contrib/single-node.sh
```

## 📝 注意事项

1. **数据重置**: 两个脚本都会重置节点数据，这意味着会丢失所有区块链历史
2. **开发环境**: 这些脚本主要用于本地开发和测试
3. **生产环境**: 生产环境请谨慎使用数据重置功能
4. **权限**: 确保脚本有执行权限（`chmod +x *.sh`）

## 🎯 快速开始

1. 确保已构建项目：
   ```bash
   make install
   ```

2. 运行启动脚本：
   ```bash
   ./start-gaia.sh
   ```

3. 在另一个终端检查状态：
   ```bash
   gaiad status
   ```

4. 停止节点：
   ```bash
   # 在运行终端按 Ctrl+C
   # 或在其他终端运行
   pkill gaiad
   ```

享受你的 Gaia 开发之旅！🚀