# å•èŠ‚ç‚¹è½¬è´¦æ“ä½œæ¼”ç¤º

æœ¬æ–‡æ¡£æ¼”ç¤ºå¦‚ä½•åœ¨ Gaia å•èŠ‚ç‚¹ç¯å¢ƒä¸­è¿›è¡Œè½¬è´¦æ“ä½œã€‚å•èŠ‚ç‚¹è™½ç„¶åªæœ‰ä¸€ä¸ªéªŒè¯è€…ï¼Œä½†å®Œå…¨å¯ä»¥å¤„ç†å’Œç¡®è®¤äº¤æ˜“ã€‚

## ğŸ—ï¸ å•èŠ‚ç‚¹ç¯å¢ƒè¯´æ˜

### åˆå§‹è´¦æˆ·è®¾ç½®

æ ¹æ® `contrib/single-node.sh` è„šæœ¬ï¼Œå•èŠ‚ç‚¹åˆå§‹åŒ–æ—¶ä¼šåˆ›å»ºä¸¤ä¸ªè´¦æˆ·ï¼š

1. **validator** - éªŒè¯è€…è´¦æˆ·ï¼Œåˆå§‹ä½™é¢ï¼š100000000000stake
2. **user** - æ™®é€šç”¨æˆ·è´¦æˆ·ï¼Œåˆå§‹ä½™é¢ï¼š100000000000stake

### ä¸ºä»€ä¹ˆå•èŠ‚ç‚¹å¯ä»¥è¿›è¡Œè½¬è´¦ï¼Ÿ

- **è‡ªæˆ‘éªŒè¯**ï¼šå•èŠ‚ç‚¹æ—¢æ˜¯éªŒè¯è€…åˆæ˜¯ç½‘ç»œçš„å”¯ä¸€èŠ‚ç‚¹
- **å³æ—¶ç¡®è®¤**ï¼šäº¤æ˜“æäº¤åç«‹å³è¢«éªŒè¯å’Œç¡®è®¤
- **å®Œæ•´åŠŸèƒ½**ï¼šå…·å¤‡å®Œæ•´çš„åŒºå—é“¾åŠŸèƒ½ï¼ŒåŒ…æ‹¬äº¤æ˜“å¤„ç†ã€çŠ¶æ€æ›´æ–°ç­‰

## ğŸš€ è½¬è´¦æ“ä½œæ­¥éª¤

### 1. å¯åŠ¨å•èŠ‚ç‚¹

```bash
# æ–¹æ³•ä¸€ï¼šä½¿ç”¨æˆ‘ä»¬çš„å¯åŠ¨è„šæœ¬
./runDoc/start-gaia.sh

# æ–¹æ³•äºŒï¼šä½¿ç”¨ JavaScript ç‰ˆæœ¬
node ./runDoc/start-gaia.js

# æ–¹æ³•ä¸‰ï¼šç›´æ¥ä½¿ç”¨å®˜æ–¹è„šæœ¬
./contrib/single-node.sh
```

### 2. æŸ¥çœ‹ç°æœ‰è´¦æˆ·

```bash
# æŸ¥çœ‹æ‰€æœ‰è´¦æˆ·
gaiad keys list --keyring-backend=test

# æŸ¥çœ‹ validator è´¦æˆ·åœ°å€
gaiad keys show validator -a --keyring-backend=test

# æŸ¥çœ‹ user è´¦æˆ·åœ°å€
gaiad keys show user -a --keyring-backend=test
```

### 3. æŸ¥çœ‹è´¦æˆ·ä½™é¢

```bash
# æŸ¥çœ‹ validator è´¦æˆ·ä½™é¢
gaiad query bank balances $(gaiad keys show validator -a --keyring-backend=test)

# æŸ¥çœ‹ user è´¦æˆ·ä½™é¢
gaiad query bank balances $(gaiad keys show user -a --keyring-backend=test)
```

### 4. åˆ›å»ºæ–°è´¦æˆ·ï¼ˆå¯é€‰ï¼‰

```bash
# åˆ›å»ºæ–°çš„æ¥æ”¶è´¦æˆ·
gaiad keys add recipient --keyring-backend=test

# æŸ¥çœ‹æ–°è´¦æˆ·åœ°å€
gaiad keys show recipient -a --keyring-backend=test
```

### 5. æ‰§è¡Œè½¬è´¦æ“ä½œ

#### ä» validator å‘ user è½¬è´¦

```bash
# è½¬è´¦ 1000stake ä» validator åˆ° user
gaiad tx bank send \
  $(gaiad keys show validator -a --keyring-backend=test) \
  $(gaiad keys show user -a --keyring-backend=test) \
  1000stake \
  --keyring-backend=test \
  --chain-id=test-gaia \
  --gas=auto \
  --gas-adjustment=1.5 \
  --fees=100stake \
  --yes
```

#### ä» user å‘æ–°è´¦æˆ·è½¬è´¦

```bash
# è½¬è´¦ 500stake ä» user åˆ° recipient
gaiad tx bank send \
  $(gaiad keys show user -a --keyring-backend=test) \
  $(gaiad keys show recipient -a --keyring-backend=test) \
  500stake \
  --keyring-backend=test \
  --chain-id=test-gaia \
  --gas=auto \
  --gas-adjustment=1.5 \
  --fees=100stake \
  --yes
```

### 6. éªŒè¯è½¬è´¦ç»“æœ

```bash
# æŸ¥çœ‹äº¤æ˜“å“ˆå¸Œï¼ˆä»ä¸Šä¸€æ­¥çš„è¾“å‡ºä¸­è·å–ï¼‰
gaiad query tx <TRANSACTION_HASH>

# å†æ¬¡æŸ¥çœ‹æ‰€æœ‰è´¦æˆ·ä½™é¢
gaiad query bank balances $(gaiad keys show validator -a --keyring-backend=test)
gaiad query bank balances $(gaiad keys show user -a --keyring-backend=test)
gaiad query bank balances $(gaiad keys show recipient -a --keyring-backend=test)
```

## ğŸ“‹ å®Œæ•´æ¼”ç¤ºè„šæœ¬

### è‡ªåŠ¨åŒ–è½¬è´¦æ¼”ç¤ºè„šæœ¬

```bash
#!/bin/bash

echo "=== Gaia å•èŠ‚ç‚¹è½¬è´¦æ¼”ç¤º ==="

# è®¾ç½®å˜é‡
KEYRING="--keyring-backend=test"
CHAIN_ID="--chain-id=test-gaia"
GAS="--gas=auto --gas-adjustment=1.5"
FEES="--fees=100stake"

echo "1. æŸ¥çœ‹ç°æœ‰è´¦æˆ·..."
gaiad keys list $KEYRING

echo -e "\n2. æŸ¥çœ‹åˆå§‹ä½™é¢..."
VALIDATOR_ADDR=$(gaiad keys show validator -a $KEYRING)
USER_ADDR=$(gaiad keys show user -a $KEYRING)

echo "Validator åœ°å€: $VALIDATOR_ADDR"
echo "User åœ°å€: $USER_ADDR"

echo "Validator ä½™é¢:"
gaiad query bank balances $VALIDATOR_ADDR

echo "User ä½™é¢:"
gaiad query bank balances $USER_ADDR

echo -e "\n3. åˆ›å»ºæ–°çš„æ¥æ”¶è´¦æˆ·..."
gaiad keys add recipient $KEYRING --output json

RECIPIENT_ADDR=$(gaiad keys show recipient -a $KEYRING)
echo "Recipient åœ°å€: $RECIPIENT_ADDR"

echo -e "\n4. æ‰§è¡Œè½¬è´¦ï¼švalidator -> user (1000stake)..."
TX1=$(gaiad tx bank send $VALIDATOR_ADDR $USER_ADDR 1000stake $KEYRING $CHAIN_ID $GAS $FEES --yes --output json | jq -r '.txhash')
echo "äº¤æ˜“å“ˆå¸Œ: $TX1"

echo -e "\n5. ç­‰å¾…äº¤æ˜“ç¡®è®¤..."
sleep 3

echo -e "\n6. æ‰§è¡Œè½¬è´¦ï¼šuser -> recipient (500stake)..."
TX2=$(gaiad tx bank send $USER_ADDR $RECIPIENT_ADDR 500stake $KEYRING $CHAIN_ID $GAS $FEES --yes --output json | jq -r '.txhash')
echo "äº¤æ˜“å“ˆå¸Œ: $TX2"

echo -e "\n7. ç­‰å¾…äº¤æ˜“ç¡®è®¤..."
sleep 3

echo -e "\n8. æŸ¥çœ‹æœ€ç»ˆä½™é¢..."
echo "Validator æœ€ç»ˆä½™é¢:"
gaiad query bank balances $VALIDATOR_ADDR

echo "User æœ€ç»ˆä½™é¢:"
gaiad query bank balances $USER_ADDR

echo "Recipient æœ€ç»ˆä½™é¢:"
gaiad query bank balances $RECIPIENT_ADDR

echo -e "\n9. æŸ¥çœ‹äº¤æ˜“è¯¦æƒ…..."
echo "äº¤æ˜“ 1 è¯¦æƒ…:"
gaiad query tx $TX1

echo "äº¤æ˜“ 2 è¯¦æƒ…:"
gaiad query tx $TX2

echo -e "\n=== è½¬è´¦æ¼”ç¤ºå®Œæˆ ==="
```

## ğŸ” å‘½ä»¤å‚æ•°è¯´æ˜

### è½¬è´¦å‘½ä»¤å‚æ•°è¯¦è§£

- `--keyring-backend=test` - ä½¿ç”¨æµ‹è¯•å¯†é’¥ç¯ï¼ˆä¸éœ€è¦å¯†ç ï¼‰
- `--chain-id=test-gaia` - æŒ‡å®šé“¾ ID
- `--gas=auto` - è‡ªåŠ¨è®¡ç®— gas
- `--gas-adjustment=1.5` - gas è°ƒæ•´ç³»æ•°
- `--fees=100stake` - äº¤æ˜“æ‰‹ç»­è´¹
- `--yes` - è‡ªåŠ¨ç¡®è®¤äº¤æ˜“

### æŸ¥è¯¢å‘½ä»¤

- `gaiad keys list` - åˆ—å‡ºæ‰€æœ‰è´¦æˆ·
- `gaiad keys show <name> -a` - æ˜¾ç¤ºè´¦æˆ·åœ°å€
- `gaiad query bank balances <address>` - æŸ¥è¯¢ä½™é¢
- `gaiad query tx <hash>` - æŸ¥è¯¢äº¤æ˜“è¯¦æƒ…

## ğŸ’¡ å®ç”¨æŠ€å·§

### 1. ä½¿ç”¨åˆ«åç®€åŒ–å‘½ä»¤

```bash
# åœ¨ ~/.bashrc æˆ– ~/.zshrc ä¸­æ·»åŠ 
alias gaia-send="gaiad tx bank send --keyring-backend=test --chain-id=test-gaia --gas=auto --gas-adjustment=1.5 --fees=100stake --yes"
alias gaia-balance="gaiad query bank balances"
alias gaia-keys="gaiad keys list --keyring-backend=test"

# ä½¿ç”¨åˆ«å
gaia-send $VALIDATOR_ADDR $USER_ADDR 1000stake
```

### 2. æ‰¹é‡è½¬è´¦è„šæœ¬

```bash
#!/bin/bash
# æ‰¹é‡è½¬è´¦åˆ°å¤šä¸ªåœ°å€

SENDER=$(gaiad keys show validator -a --keyring-backend=test)
RECIPIENTS=("addr1" "addr2" "addr3")
AMOUNT="100stake"

for recipient in "${RECIPIENTS[@]}"; do
    echo "è½¬è´¦ $AMOUNT åˆ° $recipient"
    gaiad tx bank send $SENDER $recipient $AMOUNT \
        --keyring-backend=test \
        --chain-id=test-gaia \
        --gas=auto \
        --gas-adjustment=1.5 \
        --fees=100stake \
        --yes
    sleep 2
done
```

### 3. ç›‘æ§ä½™é¢å˜åŒ–

```bash
#!/bin/bash
# å®æ—¶ç›‘æ§è´¦æˆ·ä½™é¢

ADDR=$(gaiad keys show validator -a --keyring-backend=test)

while true; do
    clear
    echo "=== è´¦æˆ·ä½™é¢ç›‘æ§ ==="
    echo "åœ°å€: $ADDR"
    echo "æ—¶é—´: $(date)"
    gaiad query bank balances $ADDR
    sleep 5
done
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æµ‹è¯•ç¯å¢ƒ**ï¼šè¿™æ˜¯æµ‹è¯•ç¯å¢ƒï¼Œä½¿ç”¨çš„æ˜¯æµ‹è¯•ä»£å¸ `stake`
2. **å¯†é’¥å®‰å…¨**ï¼šä½¿ç”¨ `--keyring-backend=test` ä»…é€‚ç”¨äºæµ‹è¯•
3. **æ‰‹ç»­è´¹**ï¼šæ¯ç¬”äº¤æ˜“éƒ½éœ€è¦æ”¯ä»˜æ‰‹ç»­è´¹
4. **ç¡®è®¤æ—¶é—´**ï¼šå•èŠ‚ç‚¹ç¡®è®¤å¾ˆå¿«ï¼Œé€šå¸¸ 1-2 ç§’
5. **ä½™é¢æ£€æŸ¥**ï¼šè½¬è´¦å‰ç¡®ä¿æœ‰è¶³å¤Ÿä½™é¢æ”¯ä»˜é‡‘é¢å’Œæ‰‹ç»­è´¹

## ğŸ¯ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆè½¬è´¦å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
- ä½™é¢æ˜¯å¦è¶³å¤Ÿï¼ˆåŒ…æ‹¬æ‰‹ç»­è´¹ï¼‰
- åœ°å€æ˜¯å¦æ­£ç¡®
- èŠ‚ç‚¹æ˜¯å¦æ­£åœ¨è¿è¡Œ
- é“¾ ID æ˜¯å¦åŒ¹é…

### Q: å¦‚ä½•æŸ¥çœ‹äº¤æ˜“çŠ¶æ€ï¼Ÿ
A: ä½¿ç”¨äº¤æ˜“å“ˆå¸ŒæŸ¥è¯¢ï¼š
```bash
gaiad query tx <TRANSACTION_HASH>
```

### Q: å¦‚ä½•åŠ é€Ÿäº¤æ˜“ç¡®è®¤ï¼Ÿ
A: å•èŠ‚ç‚¹ç¯å¢ƒä¸‹äº¤æ˜“ç¡®è®¤å·²ç»å¾ˆå¿«ï¼Œå¦‚éœ€æ›´å¿«å¯ä»¥ï¼š
- å¢åŠ  gas è´¹ç”¨
- è°ƒæ•´èŠ‚ç‚¹é…ç½®ä¸­çš„ `timeout_commit`

è¿™æ ·ä½ å°±å¯ä»¥åœ¨å•èŠ‚ç‚¹ç¯å¢ƒä¸­å®Œæ•´åœ°æ¼”ç¤ºè½¬è´¦æ“ä½œäº†ï¼